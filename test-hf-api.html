<!DOCTYPE html>
<html>
<head>
    <title>Hugging Face API Test</title>
</head>
<body>
    <h1>Hugging Face API Test</h1>
    <button onclick="testIntentClassification()">Test Intent Classification</button>
    <button onclick="testTextGeneration()">Test Text Generation</button>
    <button onclick="testNER()">Test Named Entity Recognition</button>
    <div id="results"></div>

    <script>
        async function testIntentClassification() {
            console.log('üß™ Testing Hugging Face Intent Classification...');
            
            try {
                const response = await fetch('https://api-inference.huggingface.co/models/facebook/bart-large-mnli', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        inputs: "I want to travel from Mumbai to Delhi",
                        parameters: {
                            candidate_labels: [
                                'route planning and navigation',
                                'weather information request', 
                                'tourist attractions and places',
                                'greeting and conversation',
                                'help and assistance request'
                            ]
                        }
                    })
                });

                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('‚úÖ Intent Classification SUCCESS:', data);
                    document.getElementById('results').innerHTML += '<p>‚úÖ Intent Classification: ' + JSON.stringify(data, null, 2) + '</p>';
                } else {
                    const errorText = await response.text();
                    console.log('‚ùå Intent Classification FAILED:', response.status, errorText);
                    document.getElementById('results').innerHTML += '<p>‚ùå Intent Classification Failed: ' + response.status + ' - ' + errorText + '</p>';
                }
            } catch (error) {
                console.log('‚ùå Intent Classification ERROR:', error);
                document.getElementById('results').innerHTML += '<p>‚ùå Intent Classification Error: ' + error.message + '</p>';
            }
        }

        async function testTextGeneration() {
            console.log('üß™ Testing Hugging Face Text Generation...');
            
            try {
                const response = await fetch('https://api-inference.huggingface.co/models/gpt2', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        inputs: "Travel Assistant: I help plan trips and routes.\n\nUser: Tell me about Paris\nAssistant:",
                        parameters: {
                            max_length: 100,
                            temperature: 0.7,
                            do_sample: true,
                            pad_token_id: 50256
                        }
                    })
                });

                console.log('Response status:', response.status);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('‚úÖ Text Generation SUCCESS:', data);
                    document.getElementById('results').innerHTML += '<p>‚úÖ Text Generation: ' + JSON.stringify(data, null, 2) + '</p>';
                } else {
                    const errorText = await response.text();
                    console.log('‚ùå Text Generation FAILED:', response.status, errorText);
                    document.getElementById('results').innerHTML += '<p>‚ùå Text Generation Failed: ' + response.status + ' - ' + errorText + '</p>';
                }
            } catch (error) {
                console.log('‚ùå Text Generation ERROR:', error);
                document.getElementById('results').innerHTML += '<p>‚ùå Text Generation Error: ' + error.message + '</p>';
            }
        }

        async function testNER() {
            console.log('üß™ Testing Hugging Face Named Entity Recognition...');
            
            try {
                const response = await fetch('https://api-inference.huggingface.co/models/dbmdz/bert-large-cased-finetuned-conll03-english', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        inputs: "I want to travel from Mumbai to Delhi and visit the Taj Mahal in Agra"
                    })
                });

                console.log('Response status:', response.status);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('‚úÖ NER SUCCESS:', data);
                    document.getElementById('results').innerHTML += '<p>‚úÖ NER: ' + JSON.stringify(data, null, 2) + '</p>';
                } else {
                    const errorText = await response.text();
                    console.log('‚ùå NER FAILED:', response.status, errorText);
                    document.getElementById('results').innerHTML += '<p>‚ùå NER Failed: ' + response.status + ' - ' + errorText + '</p>';
                }
            } catch (error) {
                console.log('‚ùå NER ERROR:', error);
                document.getElementById('results').innerHTML += '<p>‚ùå NER Error: ' + error.message + '</p>';
            }
        }

        // Test all APIs on page load
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Starting Hugging Face API Tests...');
            
            setTimeout(() => {
                testIntentClassification();
            }, 1000);
            
            setTimeout(() => {
                testTextGeneration();
            }, 3000);
            
            setTimeout(() => {
                testNER();
            }, 5000);
        });

        // Also test other free APIs
        async function testFreeAPIs() {
            console.log('üß™ Testing Other Free APIs...');
            
            // Test Wikipedia API
            try {
                const wikiResponse = await fetch('https://en.wikipedia.org/api/rest_v1/page/summary/Paris');
                if (wikiResponse.ok) {
                    const wikiData = await wikiResponse.json();
                    console.log('‚úÖ Wikipedia API SUCCESS:', wikiData.extract);
                } else {
                    console.log('‚ùå Wikipedia API FAILED:', wikiResponse.status);
                }
            } catch (error) {
                console.log('‚ùå Wikipedia API ERROR:', error);
            }

            // Test Weather API
            try {
                const weatherResponse = await fetch('https://wttr.in/London?format=j1');
                if (weatherResponse.ok) {
                    const weatherData = await weatherResponse.json();
                    console.log('‚úÖ Weather API SUCCESS:', weatherData.current_condition);
                } else {
                    console.log('‚ùå Weather API FAILED:', weatherResponse.status);
                }
            } catch (error) {
                console.log('‚ùå Weather API ERROR:', error);
            }

            // Test Nominatim API
            try {
                const geoResponse = await fetch('https://nominatim.openstreetmap.org/search?q=Mumbai&format=json&limit=1');
                if (geoResponse.ok) {
                    const geoData = await geoResponse.json();
                    console.log('‚úÖ Nominatim API SUCCESS:', geoData);
                } else {
                    console.log('‚ùå Nominatim API FAILED:', geoResponse.status);
                }
            } catch (error) {
                console.log('‚ùå Nominatim API ERROR:', error);
            }
        }

        // Test free APIs after 7 seconds
        setTimeout(testFreeAPIs, 7000);
    </script>
</body>
</html>